# ğŸ“– AI äº’åŠ¨å°è¯´ç”Ÿæˆå™¨

è¿™æ˜¯ä¸€ä¸ªåŸºäºå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„åŠ¨æ€äº’åŠ¨å°è¯´æ¸¸æˆã€‚å®ƒèƒ½å¤Ÿæ ¹æ®ç©å®¶é€‰æ‹©çš„æ•…äº‹ç±»å‹ï¼Œå®æ—¶ç”Ÿæˆç‹¬ç‰¹çš„æ•…äº‹æƒ…èŠ‚ã€äººç‰©ã€ä»¥åŠä¸€ä¸ªå¯è§†åŒ–çš„æ•…äº‹å‘å±•çº¿è·¯å›¾ï¼Œä¸ºç©å®¶æä¾›ä¸€ä¸ªå……æ»¡æœªçŸ¥å’Œé€‰æ‹©çš„æ²‰æµ¸å¼é˜…è¯»ä½“éªŒã€‚

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

*   **ğŸ¤– åŠ¨æ€æ•…äº‹ç”Ÿæˆ**: æ¸¸æˆçš„æ ¸å¿ƒç”± AI é©±åŠ¨ï¼Œèƒ½å¤Ÿæ ¹æ®é¢„è®¾çš„æ–‡å­¦é£æ ¼ï¼ˆå¦‚â€œä¸œæ–¹ç„å¹»â€ã€â€œè¥¿æ–¹é­”å¹»â€ï¼‰åŠ¨æ€åˆ›ä½œæ•…äº‹çš„å¼€ç¯‡ã€å‘å±•å’Œå¤šé‡ç»“å±€ã€‚
*   **ğŸ² éšæœºåŒ–ä½œå®¶ä¸ä½œå“**: æ¯æ¬¡å¼€å¯æ–°æ¸¸æˆï¼Œç³»ç»Ÿéƒ½ä¼šéšæœºç”Ÿæˆç¬¦åˆæ‰€é€‰ç±»å‹çš„â€œä½œå®¶â€å’Œâ€œä¹¦åâ€ï¼Œå¢åŠ æ¸¸æˆçš„è¶£å‘³æ€§å’Œä»£å…¥æ„Ÿã€‚
*   **ğŸ—ºï¸ å¯è§†åŒ–æ•…äº‹çº¿è·¯å›¾**: åœ¨æ¸¸æˆå¼€å§‹æ—¶ï¼Œåç«¯ä¼šé¢„å…ˆç”Ÿæˆæ•´ä¸ªæ•…äº‹çš„ç»“æ„å›¾ï¼ˆStory Mapï¼‰ï¼Œå¹¶é€šè¿‡ [Mermaid.js](https://mermaid-js.github.io/mermaid/#/) åœ¨å‰ç«¯æ¸²æŸ“ï¼Œè®©ç©å®¶å¯ä»¥ç›´è§‚åœ°çœ‹åˆ°æ•…äº‹çš„æ½œåœ¨åˆ†æ”¯å’Œç»“å±€ã€‚
*   **ğŸŒ¿ åˆ†æ”¯å™äº‹**: ç©å®¶çš„æ¯ä¸€ä¸ªé€‰æ‹©éƒ½ä¼šå½±å“æ•…äº‹çš„èµ°å‘ï¼Œå¯¼å‘ä¸åŒçš„æƒ…èŠ‚åˆ†æ”¯å’Œæœ€ç»ˆç»“å±€ã€‚
*   **ğŸ¨ åŠ¨æ€å†™ä½œé£æ ¼**: AI ä¼šæ ¹æ®æ•…äº‹ç±»å‹ç”Ÿæˆç‹¬ç‰¹çš„å†™ä½œé£æ ¼æè¿°ï¼Œå¹¶åº”ç”¨äºæ•´ä¸ªæ•…äº‹çš„å™è¿°ä¸­ï¼Œå¢å¼ºæ²‰æµ¸æ„Ÿã€‚

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| åˆ†ç±»      | æŠ€æœ¯                                                                                             |
| :-------- | :----------------------------------------------------------------------------------------------- |
| **åç«¯**  | [**FastAPI**](https://fastapi.tiangolo.com/) - é«˜æ€§èƒ½çš„ Python Web æ¡†æ¶ã€‚                          |
|           | [**SQLAlchemy**](https://www.sqlalchemy.org/) & [**SQLModel**](https://sqlmodel.tiangolo.com/) - æ•°æ®åº“äº¤äº’å’Œå¯¹è±¡å…³ç³»æ˜ å°„ (ORM)ã€‚ |
|           | [**Redis**](https://redis.io/) - ç”¨äºç¼“å­˜å’Œ Server-Sent Events (SSE) æ¶ˆæ¯é˜Ÿåˆ—ã€‚                    |
| **å‰ç«¯**  | [**Vanilla JavaScript**](http://vanilla-js.com/) - æ— æ¡†æ¶çš„çº¯åŸç”Ÿ JavaScriptï¼Œç”¨äºæ ¸å¿ƒäº¤äº’é€»è¾‘ã€‚ |
|           | [**Tailwind CSS**](https://tailwindcss.com/) - ä¸€ä¸ªåŠŸèƒ½ç±»ä¼˜å…ˆçš„ CSS æ¡†æ¶ï¼Œç”¨äºå¿«é€Ÿæ„å»ºç•Œé¢ã€‚       |
|           | [**Mermaid.js**](https://mermaid-js.github.io/mermaid/#/) - ç”¨äºå°†æ–‡æœ¬å’Œä»£ç è½¬æ¢ä¸ºæµç¨‹å›¾å’Œå¯è§†åŒ–å›¾è¡¨ã€‚ |
| **AI**    | [**OpenAI GPT**](https://openai.com/) - ä½œä¸ºæ•…äº‹ç”Ÿæˆçš„æ ¸å¿ƒå¼•æ“ã€‚                                   |
| **éƒ¨ç½²**  | [**Docker**](https://www.docker.com/) & [**Docker Compose**](https://docs.docker.com/compose/) - ç”¨äºå®¹å™¨åŒ–éƒ¨ç½²å’Œç®¡ç†åº”ç”¨æœåŠ¡ã€‚ |

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ app/                # FastAPI åç«¯åº”ç”¨æ ¸å¿ƒä»£ç 
â”‚   â”œâ”€â”€ api/            # API è·¯ç”±å’Œç«¯ç‚¹
â”‚   â”œâ”€â”€ crud/           # æ•°æ®åº“å¢åˆ æ”¹æŸ¥æ“ä½œ
â”‚   â”œâ”€â”€ models/         # SQLAlchemy æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ schemas/        # Pydantic æ•°æ®æ ¡éªŒæ¨¡å‹
â”‚   â”œâ”€â”€ services/       # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚æ•…äº‹ç”Ÿæˆï¼‰
â”‚   â”œâ”€â”€ main.py         # FastAPI åº”ç”¨å…¥å£
â”‚   â””â”€â”€ database.py     # æ•°æ®åº“è¿æ¥ä¸åˆå§‹åŒ–
â”œâ”€â”€ static/             # é™æ€æ–‡ä»¶ï¼ˆCSS, JS, å›¾ç‰‡ï¼‰
â”œâ”€â”€ templates/          # HTML æ¨¡æ¿
â”œâ”€â”€ .env.example        # ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶
â”œâ”€â”€ .gitignore          # Git å¿½ç•¥é…ç½®æ–‡ä»¶
â”œâ”€â”€ DESIGN.md           # ç³»ç»Ÿè®¾è®¡æ–‡æ¡£
â”œâ”€â”€ docker-compose.yml  # Docker æœåŠ¡ç¼–æ’
â”œâ”€â”€ Dockerfile          # Web æœåŠ¡çš„ Docker é•œåƒé…ç½®
â””â”€â”€ README.md           # æœ¬æ–‡æ¡£
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

é€šè¿‡ Dockerï¼Œä½ å¯ä»¥è½»æ¾åœ°åœ¨æœ¬åœ°è¿è¡Œæœ¬é¡¹ç›®ã€‚

**å…ˆå†³æ¡ä»¶**:
*   å·²å®‰è£… [Docker](https://www.docker.com/get-started) å’Œ [Docker Compose](https://docs.docker.com/compose/install/)ã€‚

**é…ç½®**:

1.  **åˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶**:
    é¡¹ç›®ä½¿ç”¨ `.env` æ–‡ä»¶æ¥ç®¡ç†æ•æ„Ÿé…ç½®ã€‚æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªç¤ºä¾‹æ–‡ä»¶ `.env.example`ï¼Œæ‚¨å¯ä»¥å¤åˆ¶å®ƒæ¥åˆ›å»ºè‡ªå·±çš„é…ç½®æ–‡ä»¶ï¼š
    ```bash
    # åœ¨ Windows ä¸Šä½¿ç”¨ copy
    copy .env.example .env

    # åœ¨ macOS/Linux ä¸Šä½¿ç”¨ cp
    cp .env.example .env
    ```

2.  **ç¼–è¾‘ `.env` æ–‡ä»¶**:
    æ‰“å¼€æ–°åˆ›å»ºçš„ `.env` æ–‡ä»¶ï¼Œå¹¶å¡«å…¥æ‚¨çš„ OpenAI API å¯†é’¥ä»¥åŠå…¶ä»–å¯èƒ½éœ€è¦ä¿®æ”¹çš„é…ç½®ã€‚

**å¯åŠ¨æ­¥éª¤**:

1.  **æ„å»ºå¹¶å¯åŠ¨æœåŠ¡**:
    åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
    ```bash
    docker-compose up --build
    ```

2.  **ç¼–è¯‘å‰ç«¯æ ·å¼ (å¯é€‰)**:
    å¦‚æœä½ éœ€è¦ä¿®æ”¹å‰ç«¯æ ·å¼ï¼Œå¯ä»¥æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯ï¼Œè¿è¡Œ `npm` è„šæœ¬æ¥å®æ—¶ç›‘å¬å’Œç¼–è¯‘ `tailwind.css`ï¼š
    ```bash
    npm run build
    ```

3.  **è®¿é—®åº”ç”¨**:
    æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® `http://localhost:1888` å³å¯å¼€å§‹æ¸¸æˆã€‚

---

## ğŸŒ API ç«¯ç‚¹

é¡¹ç›®æä¾›äº†ä¸€ç»„ RESTful API æ¥ç®¡ç†æ¸¸æˆçŠ¶æ€ã€‚

| æ–¹æ³•   | è·¯å¾„                           | æè¿°                               |
| :----- | :----------------------------- | :--------------------------------- |
| `POST` | `/api/v1/game`                 | åˆ›å»ºä¸€ä¸ªæ–°æ¸¸æˆï¼Œè¿”å›åˆå§‹åœºæ™¯å’Œæ•…äº‹å›¾ã€‚ |
| `POST` | `/api/v1/game/{game_id}/choice`| æäº¤ç©å®¶çš„é€‰æ‹©ï¼Œè·å–ä¸‹ä¸€ä¸ªåœºæ™¯ã€‚   |
| `GET`  | `/api/v1/game/{game_id}`       | è·å–æŒ‡å®šæ¸¸æˆçš„å½“å‰å®Œæ•´çŠ¶æ€ã€‚       |
| `DELETE`| `/api/v1/game/{game_id}`      | åˆ é™¤ä¸€ä¸ªæ¸¸æˆä¼šè¯ã€‚                 |

---

## âš™ï¸ å·¥ä½œæµç¨‹

ä¸‹å›¾ç®€è¦æè¿°äº†ä»ç©å®¶å¼€å§‹æ¸¸æˆåˆ°æ•…äº‹å†…å®¹å‘ˆç°çš„å®Œæ•´æµç¨‹ï¼š

```mermaid
sequenceDiagram
    participant User as ç”¨æˆ·
    participant Frontend as å‰ç«¯ (JS)
    participant Backend as åç«¯ (FastAPI)
    participant StoryGen as æ•…äº‹ç”ŸæˆæœåŠ¡
    participant LLM as AI å¤§è¯­è¨€æ¨¡å‹
    participant DB as æ•°æ®åº“

    User->>Frontend: é€‰æ‹©æ•…äº‹ç±»å‹ï¼Œç‚¹å‡»â€œå¼€å§‹â€
    Frontend->>Backend: POST /api/v1/game
    Backend->>StoryGen: generate_initial_scene()
    StoryGen->>LLM: è¯·æ±‚ç”Ÿæˆæ•…äº‹çº¿è·¯å›¾ (JSON)
    LLM-->>StoryGen: è¿”å›å®Œæ•´æ•…äº‹ç»“æ„
    StoryGen->>DB: ä¿å­˜æ•…äº‹å…ƒæ•°æ® (ä½œè€…, æ ‡é¢˜, çº¿è·¯å›¾)
    StoryGen-->>Backend: è¿”å›åˆå§‹åœºæ™¯æ•°æ®
    Backend-->>Frontend: è¿”å› {game_id, scene, author, title, story_map}
    Frontend->>Mermaid.js: æ¸²æŸ“æ•…äº‹çº¿è·¯å›¾
    Frontend->>User: æ˜¾ç¤ºåˆå§‹åœºæ™¯å’Œçº¿è·¯å›¾

## Star History

[![Star History Chart](https://api.star-history.com/svg?repos=xiamuceer-j/AI-Gamble&type=Date)](https://www.star-history.com/#xiamuceer-j/AI-Gamble&Date)

![Alt](https://repobeats.axiom.co/api/embed/de78e4c6804998e61045cab53ad94f56ee6a9737.svg "Repobeats analytics image")